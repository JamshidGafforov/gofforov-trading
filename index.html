<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Gofforov Trading</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<hr style="margin:40px 0;opacity:.2">

<div class="card-3d">
  <h2 id="sessionTitle">ğŸ•’ Trading Sessions</h2>

  <div id="sessions"></div>
</div>

<br>

<div class="card-3d">
  <h2 id="calendarTitle">ğŸ“… Economic Calendar</h2>

  <iframe
    id="calendar"
    src="https://www.tradingview.com/embed-widget/events/?locale=en"
    style="height:420px">
  </iframe>
</div>

<style>
body {
  background: #0b1220;
  color: #fff;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 20px;
}

select {
  padding: 6px;
  margin-bottom: 15px;
}

.card-3d {
  background: linear-gradient(145deg, #121c2f, #0a1020);
  border-radius: 16px;
  padding: 20px;
  box-shadow:
    0 10px 25px rgba(0,0,0,0.6),
    inset 0 0 10px rgba(255,255,255,0.05);
  max-width: 600px;
  margin: auto;
}

h2 {
  text-align: center;
  margin-bottom: 15px;
}
</style>
</head>

<body>

<select id="lang" onchange="updateChart()">
  <option value="en">English</option>
  <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
  <option value="uz">Oâ€˜zbek</option>
  <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
</select>

<div class="card-3d">
  <h2 id="title">Market Indices</h2>
  <canvas id="marketChart"></canvas>
</div>

<script>
let chart;

const translations = {
  en: {
    title: "Market Indices",
    labels: ["S&P 500", "NASDAQ 100", "Dow Jones", "DAX", "FTSE 100"]
  },
  ru: {
    title: "Ğ Ñ‹Ğ½Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹",
    labels: ["S&P 500", "NASDAQ 100", "Dow Jones", "DAX", "FTSE 100"]
  },
  uz: {
    title: "Bozor indekslari",
    labels: ["S&P 500", "NASDAQ 100", "Dow Jones", "DAX", "FTSE 100"]
  },
  ar: {
    title: "Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø³ÙˆÙ‚",
    labels: ["S&P 500", "NASDAQ 100", "Ø¯Ø§Ùˆ Ø¬ÙˆÙ†Ø²", "DAX", "FTSE 100"]
  }
};

const values = [6942, 25525, 49366, 25297, 10254];

function updateChart() {
  const lang = document.getElementById("lang").value;
  document.getElementById("title").innerText = translations[lang].title;

  if (chart) chart.destroy();

  chart = new Chart(document.getElementById("marketChart"), {
    type: "bar",
    data: {
      labels: translations[lang].labels,
      datasets: [{
        data: values,
        backgroundColor: "#3b82f6"
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false }
      },
      scales: {
        x: {
          ticks: { color: "#fff" }
        },
        y: {
          ticks: { color: "#fff" }
        }
      }
    }
  });
}

updateChart();
</script>

</body>
</html>
<script>
function sessionStatus(hour, start, end) {
  return hour >= start && hour < end ? "ğŸŸ¢ Open" : "ğŸ”´ Closed";
}

function updateSessions(lang) {
  const now = new Date();

  const zones = {
    uz: ["Asia/Tashkent", 9, 18],
    tokyo: ["Asia/Tokyo", 9, 18],
    london: ["Europe/London", 8, 17],
    ny: ["America/New_York", 8, 17]
  };

  const names = {
    en: ["Uzbekistan","Tokyo","London","New York","Overlap"],
    ru: ["Ğ£Ğ·Ğ±ĞµĞºĞ¸ÑÑ‚Ğ°Ğ½","Ğ¢Ğ¾ĞºĞ¸Ğ¾","Ğ›Ğ¾Ğ½Ğ´Ğ¾Ğ½","ĞÑŒÑ-Ğ™Ğ¾Ñ€Ğº","ĞŸĞµÑ€ĞµĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ"],
    uz: ["OÊ»zbekiston","Tokio","London","New York","Overlap"],
    ar: ["Ø£ÙˆØ²Ø¨ÙƒØ³ØªØ§Ù†","Ø·ÙˆÙƒÙŠÙˆ","Ù„Ù†Ø¯Ù†","Ù†ÙŠÙˆÙŠÙˆØ±Ùƒ","ØªØ¯Ø§Ø®Ù„"]
  };

  let html = "";

  let londonHour, nyHour;

  Object.keys(zones).forEach((k,i)=>{
    const d = new Date(now.toLocaleString("en-US",{timeZone:zones[k][0]}));
    const h = d.getHours();
    if(k==="london") londonHour=h;
    if(k==="ny") nyHour=h;

    html += `<div style="display:flex;justify-content:space-between;margin:6px 0">
      <span>${names[lang][i]}</span>
      <span>${d.toLocaleTimeString("en-GB")} â€¢ ${sessionStatus(h,zones[k][1],zones[k][2])}</span>
    </div>`;
  });

  const overlap = londonHour>=13 && londonHour<17 && nyHour>=8 && nyHour<12;
  html += `<div style="margin-top:8px;font-weight:bold">
    ${names[lang][4]}: ${overlap ? "âš¡ High volatility" : "â€”"}
  </div>`;

  document.getElementById("sessions").innerHTML = html;
}

const oldSetLang = setLang;
setLang = function(lang){
  oldSetLang(lang);
  document.getElementById("calendar").src =
    "https://www.tradingview.com/embed-widget/events/?locale=" + lang;

  updateSessions(lang);

  const titles = {
    en:["ğŸ•’ Trading Sessions","ğŸ“… Economic Calendar"],
    ru:["ğŸ•’ Ğ¢Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğµ ÑĞµÑÑĞ¸Ğ¸","ğŸ“… Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ"],
    uz:["ğŸ•’ Savdo sessiyalari","ğŸ“… Iqtisodiy kalender"],
    ar:["ğŸ•’ Ø¬Ù„Ø³Ø§Øª Ø§Ù„ØªØ¯Ø§ÙˆÙ„","ğŸ“… Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ"]
  };

  document.getElementById("sessionTitle").innerText = titles[lang][0];
  document.getElementById("calendarTitle").innerText = titles[lang][1];
};

updateSessions("en");
</script>
